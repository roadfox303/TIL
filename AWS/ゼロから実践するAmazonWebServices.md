# [Udemy]ゼロから実践するAmazon Web Services。手を動かしながらインフラの基礎を習得
### インフラ構築の手順
1. サーバー構成
  - どのようなサーバーが必要か考える
  - サーバーを設置する
  - サーバーのOSをインストールして各種設定
  - 必要なソフトウェアをインストール
2. ネットワークの構成
  - 構築したサーバーをネットワークに接続する
    - ネットワークで使用するIPアドレスの範囲を決める
    - サーバーにIPアドレスを割り当てる
    - ドメイン名とIPアドレスの対応を割り当てる

### 【VPC】ネットワークを構築
#### AWSネットワークの概念
- リージョン
  - リージョンによって、使えるサービスが違う。
  - リージョンには複数のアベイラビリティゾーンがある。
- アベイラビリティゾーン
  - 独立したデータセンター
  - 物理的に距離が離れており、災害時などにも他の(データセンターの)サーバーが使える。
  - リージョンの、ap-northeast-1a、ap-northeast-1c、などの末尾の表記(1aや1c)がアベイラビリティゾーン。

#### VPC (Virtuial Private Cloud)
- AWS上に仮想ネットワークを作成できるサービス。
- サブネット
  - VPCを細かく区切ったネットワーク。
  - AWSでサーバーを設置する際は、サブネットに配置する事になる。
  - サブネットはアベイラビリティゾーンの中に作る。サブネットをそれぞれ別のアベイラビリティゾーンに配置することもできる。

#### IPアドレス
- ネットワーク上で重複しない番号
- 32ビットの２進数で構成される。
- 長くて読みにくいので、8ビットづつ4つの組に分けて、ピリオドを入れて10進数で表現する。
  - 0.0.0.0 ~ 255.255.255.255

- パブリックIPアドレス
  - インターネット接続する際に使用する。
  - プロバイダーやサーバー事業者から貸し出される。(AWS上でも貸し出される)
- プライベートIPアドレス
  - インターネットでは使用されないIPアドレス。
  - 下記の範囲内のアドレスを自由に使用することができる。
  - 10.0.0.0 ~ 10.255.255.255
  - 172.16.0.0 ~ 172.31.255.255
  - 192.168.0.0 ~ 192.168.255.255
  - 社内LANやネットワーク実験などはプライベートIPアドレスを使用する。

- ネットワークを構築する際はそのネットワークで使用するIPアドレスの範囲を決める。
  - ネットワーク部とホスト部に区分けする事で範囲を表記する。
  - 192.168.128.0 ~ 192.168.128.255 まで256個のIPアドレスを使用するとしたら、
  - 192.168.128 までがの固定部分がネットワーク部、末尾の 0 ~ 255 の可変部分がホスト部。
  - CIDR表記: 192.168.128.0/24 (ネットワーク部が先頭から何ビットまでかを/の後に記載する)
  - サブネッマスク表記: 192.168.128.0/255.255.255.0 (IPアドレス末尾に/をつけ、ネットワーク部に相当するビットを1で、ホスト部に相当するビットを0で表す。)

#### AWSでVPCネットワークを構築する。
###### 1. VPCを作成する
###### 2. サブネットを作成する
- パブリックサブネット
- プライベートサブネット

###### 3. ルーティングを設定する
- インターネットゲートウェイを作成し、VPCにアタッチする。
- ルートテーブルを作成しパブリックサブネットに紐付ける。
  - ルートテーブルのイメージ。
  |宛先IPアドレス|ルーター（ターゲット）|
  |:---:|:---:|
  |10.0.1.0/24|local|
  |10.0.2.0/24|ルーターB|
  |0.0.0.0/0|ルーターC|

  - パブリックサブネットの 0.0.0.0/16 のターゲットをインターネットゲートウェイに設定する事でインターネットと接続できる。
  - ルートテーブルは各サブネットに対して設定できる。
  - サブネットやインターネットゲートウェイ間には暗黙的にルーターが動いている。

- VPC
